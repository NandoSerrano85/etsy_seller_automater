# Railway Environment Variables for Gang Sheet Memory Optimization
# Copy these to your Railway service's environment variables

# === MEMORY OPTIMIZATIONS ===

# Enable dynamic gang sheet sizing (calculates actual needed size vs max)
# Savings: 30-70% memory reduction
# Default: true
GANGSHEET_DYNAMIC_SIZING=true

# Threshold for using memory-mapped files (in GB)
# Gang sheets larger than this will use disk instead of RAM
# Lower = more aggressive (less RAM, slightly slower)
# Higher = less aggressive (more RAM, faster)
# Default: 0.5 (500MB)
# Recommended: 0.5 for standard, 0.3 for aggressive
GANGSHEET_MEMMAP_THRESHOLD_GB=0.5

# Maximum number of images to keep cached in memory
# Lower = less RAM usage, might reload images more
# Higher = more RAM usage, faster processing
# Default: 5
# Recommended: 5 for standard, 3 for aggressive
GANGSHEET_CACHE_LIMIT=5

# === ALTERNATIVE AGGRESSIVE SETTINGS ===
# Use these if still experiencing memory issues:
# GANGSHEET_MEMMAP_THRESHOLD_GB=0.3
# GANGSHEET_CACHE_LIMIT=3

# === RAILWAY RECOMMENDATIONS ===
# Free Tier (512MB RAM):     Not recommended for production
# Hobby Plan (8GB RAM):       Should work with optimizations âœ“
# Pro Plan (32GB RAM):        No issues

# === EXPECTED MEMORY USAGE ===
# With default optimizations:
#   Part 1 Peak: ~1.5GB (was 3.2GB)
#   Part 2 Peak: ~1.5GB (was 3.2GB)
#   Total Peak:  ~3.0GB (was 6.4GB)
#
# With aggressive optimizations:
#   Part 1 Peak: ~0.8GB
#   Part 2 Peak: ~0.8GB
#   Total Peak:  ~1.6GB

# === QUALITY IMPACT ===
# None - output files are identical quality
# Only affects memory usage and processing speed

# === PERFORMANCE IMPACT ===
# ~10-15% slower but won't crash
# Trade-off: Reliability > Speed
